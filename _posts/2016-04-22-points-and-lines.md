---
layout: post
title: نقاط و خطوط
category: [آموزشی]
tags: [آموزشی, ریاضیات, برنامه نویسی]
date: 2016-04-22 14:18:00 +0330
published: true
permalink: /posts/points-and-lines
summary: شاید وقتی برای اولین بار به برنامه نویسی بازی‌های کامپیوتری فکر کنیم احتمالا مهم‌ترین سوال برامون اینکه کامپیوتر به چه طریق همه اشیا رو در محل درستشون قرار می‌دهد؟ یا اشیا چگونه توسط کامپیوتر جابجا می‌شن؟ برای پاسخ به این سوالات ابتدا باید به سراغ تعریف نقطه و نحوه قرارگیری اشیا در فضاهای دو بعدی و سه بعدی برویم، دستگاه‌های مختصاتی را بررسی کنیم و سپس به سراغ تعریف خط و بردار بپردازیم. در این پست ضمن بررسی موارد یاد شده، به سراغ بررسی کابردهای خطوط هم خواهیم رفت و سیستم line-line collision detection را هم با هم بررسی خواهیم کرد.
excerpt_separator: <!--more--> 
uuid: 7fb6f37f-8800-45dc-a3cb-a9f814aedf48
comments: true
series: "برنامه نویسی، مقدمات ریاضی و فیزیک"
description: شاید وقتی برای اولین بار به برنامه نویسی بازی‌های کامپیوتری فکر کنیم احتمالا مهم‌ترین سوال برامون اینکه کامپیوتر به چه طریق همه اشیا رو در محل درستشون قرار می‌دهد؟ یا اشیا چگونه توسط کامپیوتر جابجا می‌شن؟ برای پاسخ به این سوالات ابتدا باید با تعریف نقطه و خط آشنا بشیم.
---
این مطلب اولین قسمت آموزشی از سری &quot;برنامه نویسی، مقدمات ریاضی و فیزیک&quot; خواهد بود، در [قسمت قبلی](  http://blog.kianooshnaghavi.com/:posts/relation-between-math-computer-science-programming.html) به عنوان مقدمه این مجموعه، به بررسی ارتباط بین ریاضیات با علوم کامپیوتر و برنامه نویسی پرداختیم و با توجه به ارتباط برخی از حوزه‌های برنامه نویسی و ریاضیات، تصمیم گرفتم تا مطالب ریاضی مورد نیاز و مقدماتی یکی از این حوزه‌ها، یعنی برنامه نویسی بازی‌های کامپیوتری رو بررسی کنم.
<p><blackquote class="warning">
اگر بخواهیم برای اولین بار به برنامه نویسی بازی‌های کامپیوتری فکر کنیم احتمالا مهم‌ترین سوال برامون اینکه کامپیوتر به چه طریق همه اشیا رو در محل درستشون قرار می‌دهد؟ یا اشیا چگونه توسط کامپیوتر جابجا می‌شن؟ شاید پاسخ این دو سوال، پایه و اساس پاسخ به سوالات و مطالب بعدی ما باشن.
</blackquote></p>
برای پاسخ به این سوالات اول به سراغ تعریف نقطه و نحوه قرارگیری اشیا در فضاهای دو بعدی و سه بعدی می‌ریم، دستگاه مختصاتی که از این به بعد روی اون کار خواهیم کرد رو معرفی می‌کنیم و سپس به سراغ تعریف خط و بردار می‌ریم، کاربرد خط و بردار می‌تونه در تعریف مسیر حرکت یک شی یا مشخص کردن لبه‌های اون تو فضا باشه و در پایان بعد از بررسی برخی از ویژگی‌های خطوط یا بردارها به بررسی یک نمونه از سیستم‌های تشخیص برخورد دو شی می‌پردازیم، یعنی سیستم <span class="highlight-text">line-line collision detection</span>.
<tb></tb>
<div class="post-inline-title">نقطه</div>
نقطه رو به زبان ساده می‌شه یک مکان، موقعیت یا یک محل بر روی یک صفحه تعریف کرد. همیشه باید به خاطر داشته باشیم که نقطه فقط و فقط یک &quot;مکان&quot;ه نه یک &quot;چیز&quot; یا &quot;شی&quot;. نقطه فارغ از میزان نزدیکی یا دوری چشم بیننده به اون، دارای اندازه یا عرض نیست و از اونجایی که نقطه یک مکانه، نه یک شی، پس فاقد ابعاد خواهد بود. نقاط معمولا در دنیای ریاضیات با حروف بزرگ انگلیسی نامگذاری می‌شن.
<div class="post-inline-title">هندسه تحلیلی</div>
هندسه تحلیلی، یکی از سیستم‌های هندسی است که در آن همه نقاط روی یک صفحه توسط یک &quot;زوج مرتب&quot; تعریف می‌شوند.

اگر قرارداد کنیم که منظورمان از صفحه، سطح صافی است که در راستای هر دو جهتش تا بی‌نهایت امتداد می‌یابد، با قرار دادن هر نقطه روی صفحه، هندسه تحلیلی می‌تواند محل دقیق نقطه بر روی صفحه را برای ما به وسیله یک جفت عدد، مشخص کند.

در هندسه تحلیلی، نقاط همانند شکل زیر روی یک <span class="font-color-white">دستگاه مختصات دکارتی</span> قرار می‌گیرند. دستگاه مختصات دکارتی دارای دو &quot;محور درجات&quot; است، یکی در راستای افقی که به آن <span class="highlight-text">محور x</span> می‌گویند و محور دوم در راستای دیگر یا عمودی قرار دارد که به آن <span class="highlight-text">محور y</span> می‌گویند. محل تلاقی دو محور را <span class="font-color-white">مرکز مختصات</span> گویند، مرکز مختصات نقطه‌ای است که در آن اندازه x و y برابر با صفر است.
<img class="post-image image-responsive" src="https://theskn.github.io/assets/img/2016-04-22/ch001-points-2d-coordinate-plane.png"/>
بر روی محور x، مقادیر سمت <span class="font-color-white">راست</span> مرکز مختصات، <span class="font-color-white">مثبت</span> و مقادیر سمت <span class="font-color-white">چپ</span>، <span class="font-color-white">منفی</span> هستند.

بر روی محور y، مقادیر <span class="font-color-white">بالای</span> مرکز مختصات، <span class="font-color-white">مثبت</span> و مقادیر <span class="font-color-white">پایین</span>، <span class="font-color-white">منفی</span> هستند.

محل یک نقطه در یک صفحه نیز با یک جفت عدد مشخص می‌شود، که عدد اول مشخص کننده محل نقطه روی محور x و عدد دوم مشخص کننده محل نقطه روی محور y است. برای مثال در نمودار بالا، نقطه A دارای مختصات (۴ ,۳) است و نقطه B در محل (۱ ,۲-) قرار گرفته است. توجه داشته باشید که ترتیب اعداد در این سیستم نمایش بسیار مهم است.
<div class="post-inline-title">کاربرد هندسه تحلیلی</div>
دونستن محل قرار گیری تعدادی از نقاط به ما می‌تونه در موارد زیر کمک کنه:
<ul class="top-level-list list-style-type-disc">
<li class="margin-right-25px">تعیین فاصله بین نقاط</li>
<li class="margin-right-25px">تعیین نقطه وسط، شیب و معادله خط گذرنده از نقاط</li>
<li class="margin-right-25px">تعیین وضعیت قرارگیری خطوط نسبت به یکدیگر</li>
<li class="margin-right-25px">محاسبه مساحت و محیط حاصل از چند ضلعی ساخته شده توسط نقاط</li>
<li class="margin-right-25px">تغییر اشکال با جابجایی، چرخندان یا منعکس کردن آنها</li>
<li class="margin-right-25px">تعریف معادلات منحنی‌ها و اشکال مختلف</li>
</ul>
<div class="post-inline-title">نمایش مکان‌های دو بعدی</div>
حالا فرض کنیم قصد داریم تا شش شی که محل قرار گیری آنها (با نمادهای A تا F مشخص شده‌اند) را روی صفحه نمایش قرار دهیم. برای این کار، نقاط مشخص شده (۰ ,۰)A و (۲ ,۱)B و (۳ ,۴)C و (۲ ,۱-)D و (۱- ,۲-)E و (۲- ,۳)F را روی دستگاه مختصات دکارتی رسم می‌کنیم.

<img class="post-image image-responsive" src="https://theskn.github.io/assets/img/2016-04-22/ch001-graphing-2d-locations.png"/>
حالا می‌توانیم با استفاده از توابع و تغییر وضعیت مقادیر x و y نقاط، آنها را روی صفحه جابجا کنیم.
<p><blackquote class="alert">
باید دقت کنیم تا بین دستگاه مختصات دکارتی با سیستم مختصات نمایشگرها اشتباه نکنیم. در نظر داشته باشید که در دستگاه مختصات دکارتی جهت مثبت محور y به سمت بالاست ولی سیستم مختصات نمایشگرها طوری طراحی شده تا صفحه نمایش را بتوانیم از بالا به پایین مقدار دهی کنیم، از همین رو در سیستم مختصات نمایشگرها جهت مثبت محور y به سمت پایین است.
</blackquote></p>

<img class="post-image image-responsive" src="https://theskn.github.io/assets/img/2016-04-22/ch001-the-screen-coordinate-system.png"/>
در یکی مراحلRendering Pipeline ، تبدیل مختصات دکارتی به مختصات صفحات نمایش اتفاق می‌افتد. در آینده و در یکی از قسمت‌های همین مجموعه راجع به تغییر و تبدیلات دستگاه‌های مختصاتی صحبت خواهیم کرد.
<div class="post-inline-title">هندسه تحلیلی در فضا</div>
برای مشخص کردن نقاط در فضا، مطابق شکل زیر از سه محور مختصات که دو‌ به دو بر هم عمودند استفاده می‌کنیم. محورهای x و y و z که در شکل زیر مشخص شده‌اند دستگاه مختصاتی موسوم به <span class="font-color-white">راستگرد با محورعمودی y</span>  را می‌سازند. در این دستگاه اگر انگشت شست دست راست را در جهت قسمت مثبت محور z نشانه بروید جهت خم شدن انگشتان دیگر از قسمت محور x به سوی محور y است.

<img class="post-image image-responsive" src="https://theskn.github.io/assets/img/2016-04-22/ch001-the-y-up-right-handed-coordinate-system.png"/>

مختصات دکارتی (x, y, z) نقطه‌ای در فضا را نشان می‌دهد که محل تقاطع محورهای مختصات با صفحاتی است که این نقطه از آنها می‌گذرد و بر این محورها عمودند.

لازم به ذکر است که جهت محورهای دستگاه مختصات دکارتی در فضا تابع قانون مشخصی نیست، اما دستگاهی که ما قصد کار کردن با آن را داریم، همان‌طور که در شکل بالا مشخص است، راستای مثبت محور y آن به سمت بالا است و راستای مثبت محور z آن به سمت خارج از صفحه و به سمت نظاره‌گر است. این دستگاه یک دستگاه راست گرد است. از آنجایی که دستگاه مورد استفاده در OpenGL نیز با این دستگاه یکی است، به عقیده من، کار کردن با این دستگاه دارای مزیت بیشتری نسبت به دستگاه‌های دیگر است.
<div class="post-inline-title">نمایش مکان‌های سه بعدی</div>
حالا فرض کنیم قصد داریم محل نقطه (۵ ,۴ ,۲)P را در فضا مشخص کنیم. برای انجام این کار، دو واحد در راستای مثبت محور x، چهار واحد در راستای مثبت محور y و پنج واحد در راستای مثبت محور z حرکت می‌کنیم.
<img class="post-image image-responsive" src="https://theskn.github.io/assets/img/2016-04-22/ch001-graphing-3d-locations.png"/>
حالا می‌توانیم با استفاده از توابع و تغییر وضعیت مقادیر x و y و z هر نقطه مشخصی در فضا، آنها را در فضا جابجا کنیم.
<div class="post-inline-title">ذخیره سازی نقاط در کد</div>
برای ذخیره سازی مختصات نقاط در کد می‌توانیم دو رویکرد کلی را در نظر بگیریم. رویکرد اول ذخیره مختصات نقاط در نوع‌های داده‌ای ساده و موجود مثل آرایه‌هاست و رویکرد دوم که قوی‌تر از رویکرد اول و مبتنی بر اصول شی ‌گرایی است، پیاده سازی نقاط با استفاده از structure ها یا class هاست.

مزیت ذخیره سازی مختصات نقاط در آرایه‌ها، در سرعت فراخوانی، سهولت کار با آنها و مصرف حافظه کم‌تر توسط آنهاست، اما رویکرد دوم و پیاده سازی نقاط با استفاده از structure یا class، به ما اجازه می‌دهد تا با استفاده از Operator Overloading اعمالی مانند جمع و تفریق را بر روی نقاط ذخیره شده امکان پذیر کنیم و یا به راحتی برای کار با اشیا ساخته شده، توابعی را در بدنه structure یا classمان تعریف کنیم.
<div class="ltr-direction font-family-consolas">
<pre class="brush: cpp">
// Some various data types which can be used to store points
/****************************************************************************/
// I. an array of floats.

float 3dPoint[3];
/****************************************************************************/
// II. a structure holding 3 floats.

struct 3dPoint
{
    float x, y, z;

    // The overloaded addition operator
    3dPoint operator+(const 3dPoint &P2) const
    {
        3dPoint temp = 
        {    
            this->x + P2.x,
            this->y + P2.y,
            this->z + P2.z
        };
        
        return temp;
    }
};
/****************************************************************************/
// Using this structure, adding two points:

3dPoint A, B, C;
C = A + B;
</pre>
</div>

این مطلب به روز رسانی خواهد شد.
